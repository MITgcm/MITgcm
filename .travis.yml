# Travis file for running some basic set of testreport checks on each commit
language: python

services: 
 - docker

before_install:
  # Set up environment needed to run testreport code tests
  - docker pull mitgcm/testreport-images:centos
  - docker run --rm -v `pwd`:/MITgcm -it --name centos-openad -d mitgcm/testreport-images:centos  /bin/bash

jobs:
  include:
    # test OpenAD test first during debugging of testing
    - stage: openad tests
      env:
      - MITGCM_EXP="global_ocean.90x40x15" MITGCM_PRECS="16"
      - MITGCM_TROPT="-oad -devel -of=../tools/build_options/linux_amd64_gfortran"
      - MITGCM_DECMD="docker exec -i centos-openad bash -c \"pwd; cd /root/OpenAD; export PATH=.:\${PATH};source setenv.sh;\\\""
      script: . tools/ci/runtr.sh
