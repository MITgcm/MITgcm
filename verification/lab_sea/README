Example: Labrador Sea Region with Sea-Ice
=========================================

This example sets up a small (20x16x23) Labrador Sea experiment
coupled to a dynamic thermodynamic sea-ice model.
A brief description of the sea-ice model is in "seaice.ps".

The domain of integration spans 280E to 320E and 46N to 78N.
Horizontal grid spacing is 2 degrees.
The 23 vertical levels and the bathymetry file
  bathyFile      = 'bathy.labsea'
are obtained from the the 2-degree ECCO configuration.

Integration is initialized from annual-mean Levitus climatology
 hydrogThetaFile = 'LevCli_temp.labsea'
 hydrogSaltFile  = 'LevCli_salt.labsea'

Surface salinity relaxation is to the monthly mean Levitus climatology
 saltClimFile    = 'SSS.labsea'

Forcing files are a 1979-1999 monthly climatology computed from the
NCEP reanalysis (see pkg/seaice/SEAICE_FFIELDS.h for units and signs)
  uwindFile      = 'u10m.labsea79'    # 10-m zonal wind
  vwindFile      = 'v10m.labsea79'    # 10-m meridional wind
  atempFile      = 'tair.labsea1979'  # 2-m air temperature
  aqhFile        = 'qa.labsea1979'    # 2-m specific humidity
  lwdownFile     = 'flo.labsea1979'   # downward longwave radiation
  swdownFile     = 'fsh.labsea1979'   # downward shortwave radiation
  precipFile     = 'prate.labsea1979' # precipitation

The experiment uses pkg/gmredi, pkg/kpp, pkg/seaice, and pkg/exf.
The test is a 1-cpu, 10-hour integration.   Both the atmospheric
state and the open-water surface fluxes are provided by pkg/exf.

More pkg/seaice test experiments, configured for low and
high-resolution global cube-sphere domains are described
in MITgcm_contrib/high_res_cube/README_ice.


Using testscript to test sea-ice code
=====================================

Running the testscript experiment:
  cd MITgcm/verification
  ./testreport -t lab_sea

Note that fairly large differences in accuracy occur across different
platforms.  For example, testscript comparisons between g77 (Linux)
and f77 (SGI) generated output gives:

                T           S           U           V
C D M    c        m  s        m  s        m  s        m  s
n p a R  g  m  m  e  .  m  m  e  .  m  m  e  .  m  m  e  .
f n k u  2  i  a  a  d  i  a  a  d  i  a  a  d  i  a  a  d
g d e n  d  n  x  n  .  n  x  n  .  n  x  n  .  n  x  n  .

Y Y Y Y  8 10  9 11 10  9 11 13 10  9  8  8  9  8  9  8  9 FAIL  lab_sea


Instructions for generating and running a 1-CPU experiment
==========================================================

  cd MITgcm/verification/lab_sea
  mkdir build
  cd build
  cp ../code/*.h ../code/packages.conf .
  ../../../tools/genmake2
  make depend
  make
  cd ../input
  ../build/mitgcmuv > output.txt

Use matlab script lookat_exp1.m to compare the output
of exp1 with that from checkpoint51f sea-ice code:
  cd ../../../verification/lab_sea/matlab
  matlab
  lookat_ice


Instructions for generating and running a 2-CPU experiment on kalpana
=====================================================================

  cd MITgcm/verification/lab_sea
  mkdir build
  cd build
  \cp ../code/*.h ../code/packages.conf .
  \cp ../code/SIZE.h_mpi SIZE.h
  ../../../tools/genmake2 -of ../../../tools/build_options/linux_ia64_efc+mpi_altix
  make depend
  make
  cd ../input
  mpirun -np 2 ../build/mitgcmuv
